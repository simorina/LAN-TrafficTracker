┌─────────────────────────────────────────────────┐
│  Nuovo IP rilevato (es: 192.168.1.100)          │
└────────────────┬────────────────────────────────┘
                 │
                 ▼
         ┌───────────────┐
         │ getHostname() │
         └───────┬───────┘
                 │
         ┌───────▼───────────────┐
         │ Cache check           │
         │ hostnameCache[IP]     │
         └───┬───────────────┬───┘
             │               │
       ┌─────▼──────┐   ┌───▼──────────┐
       │  Found!    │   │  Not found   │
       │  Return    │   │  Queue lookup│
       └────────────┘   └───┬──────────┘
                            │
                    ┌───────▼────────────┐
                    │ dnsLookupQueue     │
                    │ (buffered channel) │
                    └───────┬────────────┘
                            │
              ┌─────────────┼─────────────┐
              │             │             │
        ┌─────▼─────┐ ┌────▼─────┐ ┌────▼─────┐
        │  Worker 1 │ │ Worker 2 │ │ Worker N │
        │           │ │          │ │          │
        │ DNS Query │ │DNS Query │ │DNS Query │
        │  (2s max) │ │ (2s max) │ │ (2s max) │
        └─────┬─────┘ └────┬─────┘ └────┬─────┘
              │            │            │
              └────────────┼────────────┘
                           │
                  ┌────────▼─────────┐
                  │ Update Cache     │
                  │ hostnameCache[IP]│
                  │ = "laptop.local" │
                  └──────────────────┘